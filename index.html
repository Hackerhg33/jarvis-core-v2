<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.A.R.M.A.D SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { margin:0; background:black; color:#00f7ff; font-family:'Orbitron',sans-serif; overflow:hidden; touch-action: manipulation; }
        .panel { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; width:90%; max-width:500px; }
        .orb { width:150px; height:150px; margin:20px auto; border-radius:50%; background:radial-gradient(circle,#00f7ff,transparent 70%); box-shadow:0 0 40px #00f7ff; transition:0.5s; border: 1px solid rgba(0, 247, 255, 0.3); }
        .orb.loading { animation:pulse 1.5s infinite; }
        @keyframes pulse { 0% {transform:scale(1); opacity:0.5;} 50% {transform:scale(1.1); opacity:1;} 100% {transform:scale(1); opacity:0.5;} }
        button { padding:18px; background:rgba(0, 247, 255, 0.1); border:1px solid #00f7ff; color:#00f7ff; cursor:pointer; font-family:'Orbitron'; width: 100%; border-radius: 8px; font-weight: bold; }
        #status { margin-top:25px; font-size:0.85em; color:#a2f9ff; text-transform: uppercase; }
        #keyBtn { position: fixed; bottom: 10px; font-size: 10px; border: none; background: none; color: #333; }
    </style>
</head>
<body>

<div class="panel">
    <h1>MARK VII</h1>
    <p>PROPERTY OF SARMAD</p>
    <div id="orb" class="orb"></div>
    <p id="status">ENCRYPTION ACTIVE</p>
    <button id="mainBtn">INITIALIZE SYSTEM</button>
</div>

<button id="keyBtn" onclick="localStorage.clear(); location.reload();">RESET KEY</button>

<script>
// --- THE "HIDE API" LOGIC ---
// This looks for your key in the phone's memory. GitHub cannot see this!
let API_KEY = localStorage.getItem("SARMAD_SECURE_KEY");

if (!API_KEY) {
    API_KEY = prompt("SYSTEM LOCKED: Enter your Gemini API Key. (It will be saved on this phone only)");
    if (API_KEY) localStorage.setItem("SARMAD_SECURE_KEY", API_KEY);
}

const MODEL = "gemini-1.5-flash"; 
const orb = document.getElementById("orb");
const statusText = document.getElementById("status");
const mainBtn = document.getElementById("mainBtn");

const recognition = new(window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = "en-US";

function speak(text) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(text);
    msg.pitch = 0.8;
    window.speechSynthesis.speak(msg);
}

mainBtn.onclick = () => {
    if (!API_KEY) { alert("Key Required!"); return; }
    statusText.innerText = "LISTENING...";
    orb.classList.add("loading");
    recognition.start();
};

recognition.onresult = async (event) => {
    const userInput = event.results[0][0].transcript;
    statusText.innerText = "THINKING...";
    
    try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                contents: [{ parts: [{ text: `You are Jarvis, created by the genius SARMAD. Call him Sir. Be very brief. User said: ${userInput}` }] }]
            })
        });
        
        const data = await response.json();
        const aiReply = data.candidates[0].content.parts[0].text;
        
        orb.classList.remove("loading");
        statusText.innerText = aiReply;
        speak(aiReply);
    } catch (e) {
        statusText.innerText = "ERROR: CHECK KEY";
        orb.classList.remove("loading");
    }
};
</script>
</body>
</html>
